{% set layout = app.request.attributes.get('_orbitale_cms_layout') -%}
{% extends layout.resource %}

{% block stylesheets %}
    {{ parent() }}
    {% for asset_css in layout.assets_css %}
        <link rel="stylesheet" href="{{ asset(asset_css) }}">
    {% endfor %}
    {% if page.css %}
    <style type="text/css" id="orbitale_cms_css">
        {{- page.css | raw -}}
    </style>
{% endif %}
{% endblock %}

{% block orbitale_cms_head_metas %}
    {% if page.metaDescription %}<meta name="description" content="{{ page.metaDescription }}" />{% endif %}
    {% if page.metaTitle %}<meta name="title" content="{{ page.metaTitle }}" />{% endif %}
    {% if page.metaKeywords %}<meta name="keywords" content="{{ page.metaKeywords }}" />{% endif %}
{% endblock %}

{% block title %}{{- page.title -}}{% endblock %}

{% block orbitale_cms_breadcrumbs %}
    <div id="breadcrumbs">
        {% set slugsArray = [] %}
        <a href="{{ path('orbitale_cms_page') }}">{{ 'home' | trans({}, 'OrbitaleCms') }}</a>
        {% for key, breadcrumbPage in pages %}

            &gt;

            {% set slugsArray = slugsArray | merge({ (key): breadcrumbPage.slug }) %}

            {% if breadcrumbPage.id == page.id %}
                {{ breadcrumbPage.title }}
            {% else %}
                <a href="{{ path('orbitale_cms_page', {slugs: slugsArray|join('/')}) }}">
                    {{ breadcrumbPage.title }}
                </a>
            {% endif %}

        {% endfor %}
    </div>
{% endblock %}

{% block orbitale_cms_page_content %}
    <section>
        <article>
            <h1>{{ page.title }}</h1>
            {{ page.content | raw }}
        </article>
    </section>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    {% for asset_js in layout.assets_js %}
        <script type="text/javascript" src="{{ asset(asset_js) }}"></script>
    {% endfor %}
    {% if page.js %}
        <script type="text/javascript" id="orbitale_cms_js">
            {{- page.js | raw -}}
        </script>
    {% endif %}
{% endblock %}
